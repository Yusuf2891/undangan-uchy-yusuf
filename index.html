<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Undangan Pernikahan Yusuf & Uchy</title>
  <!-- Memuat font dari Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Great+Vibes&display=swap" rel="stylesheet">
  <style>
    /* Variabel Warna Dark Gold */
    :root {
      --primary-dark: #1e1e1e; /* Latar Belakang Sangat Gelap */
      --secondary-dark: #2a2a2a; /* Warna Background Elemen */
      --gold-color: #ffd700; /* Warna Emas Murni */
      --text-light: #f5f5f5; /* Teks Putih Pucat */
      --text-gold: #e5b80b; /* Teks Emas Kusam */
    }

    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: var(--primary-dark);
      color: var(--text-light);
      text-align: center;
      min-height: 100vh;
      padding: 0; /* Hapus padding agar ornamen border menyentuh tepi */
      overflow-x: hidden;
      position: relative;
    }

    /* SVG Ornamen Background (Gold Pattern) */
    .bg-ornament {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0.1; /* Opacity rendah agar tidak mengganggu teks */
        z-index: 1;
        pointer-events: none;
        /* Simple geometric gold pattern SVG */
        background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%231e1e1e"/><path d="M50 0 L100 50 L50 100 L0 50 Z" fill="none" stroke="%23e5b80b" stroke-width="1"/></svg>');
        background-size: 100px 100px;
    }
    
    /* Ornamen Garis Bunga di Sudut */
    .flower-ornament {
        position: fixed;
        z-index: 5; /* Di atas latar belakang, di bawah konten utama */
        pointer-events: none;
        width: 400px;
        max-width: 90%;
        height: 400px;
        color: var(--text-gold);
        opacity: 0.5;
        transition: opacity 0.5s;
    }
    .flower-ornament-top {
        top: -150px;
        left: 50%;
        transform: translateX(-50%);
    }
    .flower-ornament-bottom {
        bottom: -150px;
        left: 50%;
        transform: translateX(-50%) rotate(180deg);
    }
    /* Sembunyikan ornamen di layar kecil agar tidak terlalu ramai */
    @media (max-width: 600px) {
        .flower-ornament {
            display: none;
        }
    }


    /* CONTAINER UTAMA / BINGKAI CONTENT */
    .overlay {
      margin: 0 auto;
      padding: 0 15px 70px 15px; /* Padding bawah untuk navigasi */
      max-width: 500px; 
      position: relative;
      z-index: 10;
      background: var(--primary-dark); /* Pastikan konten gelap */
      min-height: calc(100vh - 70px);
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.5); /* Shadow gelap */
    }

    /* Section Card Style */
    .card {
        background: var(--secondary-dark);
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 25px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        border: 1px solid rgba(255, 215, 0, 0.1); /* Border emas tipis */
    }

    /* Font Styling */
    h1 {
      font-family: 'Great Vibes', cursive;
      font-size: 3em; 
      color: var(--gold-color);
      margin-bottom: 5px;
    }
    h2 {
      font-weight: 600;
      font-size: 1.1em;
      color: var(--text-gold);
      margin-top: 20px;
    }
    .text-gold {
        color: var(--text-gold);
    }
    .divider {
        height: 1px;
        width: 50%;
        margin: 15px auto;
        background: rgba(255, 215, 0, 0.3);
    }

    /* Button Styling */
    button {
      background-color: var(--text-gold);
      color: var(--primary-dark);
      border: none;
      padding: 10px 20px;
      border-radius: 30px;
      font-size: 0.9em;
      cursor: pointer;
      transition: 0.3s;
      margin: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }
    button:hover {
      background-color: var(--gold-color);
      transform: translateY(-2px);
    }
    
    /* Tombol Salin/Copy */
    .copy-btn {
        background-color: var(--primary-dark);
        color: var(--text-gold);
        font-size: 0.8em;
        padding: 8px 15px;
        margin: 5px;
        border: 1px solid rgba(255, 215, 0, 0.2);
    }
    .copy-btn:hover {
        background-color: #3d3d3d;
    }

    /* Bottom Navigation Bar (Baru) */
    .nav-bar {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        max-width: 500px; /* Batasi lebar navigasi */
        right: 0;
        margin: 0 auto;
        background: var(--secondary-dark);
        border-top: 1px solid rgba(255, 215, 0, 0.15);
        display: flex;
        justify-content: space-around;
        padding: 5px 0;
        z-index: 50;
    }
    .nav-item {
        color: var(--text-gold);
        font-size: 0.7em;
        padding: 5px 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        cursor: pointer;
        transition: color 0.3s;
    }
    .nav-item:hover {
        color: var(--gold-color);
    }

    /* Audio Control */
    #audio-btn {
        position: fixed;
        bottom: 75px; /* Pindah ke atas Navigasi Bar */
        right: 20px;
        z-index: 100;
        width: 45px;
        height: 45px;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: var(--text-gold);
        color: var(--primary-dark);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
    }

    /* Styling RSVP Form */
    input, textarea {
        background: var(--primary-dark);
        border: 1px solid rgba(255, 215, 0, 0.3);
        color: var(--text-light);
    }
    
    /* Tombol Buka Undangan */
    #open-btn {
        background: var(--text-gold);
        color: var(--primary-dark);
        margin-top: 30px;
    }
    
    /* Initial state for content (hidden) */
    #invitation-content {
        display: none;
    }

    /* Custom SVG for Centered Ornament */
    .center-ornament {
        margin: 20px auto;
        width: 100px;
        height: 100px;
        color: var(--text-gold);
    }

    /* Loader Style */
    .loader {
        border: 4px solid rgba(255, 255, 255, 0.1);
        border-top: 4px solid var(--text-gold);
        border-radius: 50%;
        width: 20px;
        height: 20px;
        animation: spin 1s linear infinite;
        margin: 0 auto;
        display: none;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
    /* Galeri Foto Grid */
    .photo-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr); /* 2 Kolom di mobile */
        gap: 10px;
    }
    .photo-grid img {
        width: 100%;
        height: 150px; /* Tinggi foto yang seragam */
        object-fit: cover;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        border: 1px solid rgba(255, 215, 0, 0.1);
    }

    /* Detail Bank */
    .bank-detail {
        background: var(--primary-dark);
        padding: 15px;
        border-radius: 8px;
        margin-top: 15px;
        border: 1px solid rgba(255, 215, 0, 0.2);
    }
    
    /* Media Query for Desktop */
    @media (min-width: 600px) {
        body {
            /* Desktop view with black frame */
            background: #000; 
        }
        .overlay {
            margin: 0 auto;
            padding: 40px 20px 70px 20px;
            min-height: 100vh;
        }
        .photo-grid {
            grid-template-columns: repeat(3, 1fr); /* 3 Kolom di desktop */
        }
    }
  </style>
</head>
<body>
    
  <!-- Ornamen Latar Belakang (Jaringan Emas) -->
  <div class="bg-ornament"></div>

  <!-- Ornamen Bunga (Gaya Sketsa Emas) - ATAS -->
  <svg class="flower-ornament flower-ornament-top" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
    <path d="M 0 50 C 50 20, 100 0, 200 0 C 300 0, 350 20, 400 50 L 400 0 L 0 0 Z" fill="none" stroke="currentColor" stroke-width="2"/>
    <!-- Daun dan Bunga (Line Art Sederhana) -->
    <path d="M 30 150 Q 80 120, 150 150 T 250 150" fill="none" stroke="currentColor" stroke-width="1.5"/>
    <circle cx="150" cy="150" r="10" fill="none" stroke="currentColor" stroke-width="1"/>
    <circle cx="200" cy="140" r="8" fill="none" stroke="currentColor" stroke-width="1"/>
    <path d="M 250 150 Q 300 120, 370 150" fill="none" stroke="currentColor" stroke-width="1.5"/>
    <path d="M 30 150 C 60 180, 100 160, 150 170 C 200 160, 240 180, 280 170" fill="none" stroke="currentColor" stroke-width="1.5"/>
  </svg>

  <!-- Ornamen Bunga (Gaya Sketsa Emas) - BAWAH -->
  <svg class="flower-ornament flower-ornament-bottom" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
    <path d="M 0 50 C 50 20, 100 0, 200 0 C 300 0, 350 20, 400 50 L 400 0 L 0 0 Z" fill="none" stroke="currentColor" stroke-width="2"/>
    <!-- Daun dan Bunga (Line Art Sederhana) -->
    <path d="M 30 150 Q 80 120, 150 150 T 250 150" fill="none" stroke="currentColor" stroke-width="1.5"/>
    <circle cx="150" cy="150" r="10" fill="none" stroke="currentColor" stroke-width="1"/>
    <circle cx="200" cy="140" r="8" fill="none" stroke="currentColor" stroke-width="1"/>
    <path d="M 250 150 Q 300 120, 370 150" fill="none" stroke="currentColor" stroke-width="1.5"/>
    <path d="M 30 150 C 60 180, 100 160, 150 170 C 200 160, 240 180, 280 170" fill="none" stroke="currentColor" stroke-width="1.5"/>
  </svg>

  <!-- Audio Player -->
  <audio id="bg-audio" loop>
    <!-- Ganti URL ini dengan musik Anda -->
    <source src="https://www.bensound.com/bensound-music/bensound-romantic.mp3" type="audio/mpeg">
    Browser Anda tidak mendukung pemutar audio.
  </audio>

  <!-- Tombol Audio Control (Mengambang) -->
  <button id="audio-btn" onclick="toggleAudio()" style="display: none;">
    <svg id="audio-icon-on" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--primary-dark); display: block;"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
    <svg id="audio-icon-off" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--primary-dark); display: none;"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M23 9l-4 4"></path><path d="M19 9l4 4"></path></svg>
  </button>
  
  
  <div class="overlay">
    
    <!-- Bagian Pembuka (Halaman Awal) -->
    <div id="opener" style="padding-top: 10vh;">
        <p class="text-xs uppercase tracking-widest text-gold mb-4">The Wedding of</p>
        <h1 class="text-gold">Yusuf & Uchy</h1>
        
        <!-- Ornamen Tengah (Simulasi Aceh) -->
        <svg class="center-ornament" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" fill="currentColor">
            <path d="M50 0 C70 0, 70 30, 85 40 C95 45, 95 55, 85 60 C70 70, 70 100, 50 100 C30 100, 30 70, 15 60 C5 55, 5 45, 15 40 C30 30, 30 0, 50 0 Z M50 20 C60 20, 60 40, 70 50 C60 60, 60 80, 50 80 C40 80, 40 60, 30 50 C40 40, 40 20, 50 20 Z" />
        </svg>

        <p class="text-gold mb-8 text-sm">07 . 07 . 23</p>
        
        <div class="divider"></div>
        
        <p class="text-sm mt-8">Kepada Yth. <br> Bapak/Ibu/Saudara/i</p>
        <h2 class="font-bold text-gold text-lg mb-8">Nama Tamu</h2>

        <button id="open-btn" onclick="openInvitation()">Buka Undangan</button>
    </div>

    <!-- Bagian Konten Utama (Tersembunyi Awalnya) -->
    <div id="invitation-content" style="padding-top: 30px;">
        
        <!-- Kutipan Ayat -->
        <section id="quotes" class="card">
            <h2 class="text-gold mb-3">Kutipan</h2>
            <p class="text-sm italic text-gray-400 leading-relaxed mb-4">
                "Dan diantara tanda-tanda (kebesaran)-Nya ialah Dia menciptakan untukmu pasangan-pasangan dari jenismu sendiri, agar kamu cenderung merasa tentram kepadanya, dan Dia menjadikan diantaramu rasa kasih dan sayang."
            </p>
            <p class="text-gold text-xs">Ar-Rum 21</p>
        </section>

        <!-- Informasi Pasangan -->
        <section id="mempelai" class="card">
            <h2 class="text-gold mb-4">Pasangan Mempelai</h2>
            
            <p class="text-xs text-gold">Dengan Hormat mengundang Bapak/Ibu/Saudara/i <br> untuk menghadiri acara pernikahan kami</p>
            <h1 class="my-4" style="font-size: 2.2em;">Ali & Caca</h1>

            <div class="divider"></div>
            
            <p class="text-sm mt-4 text-gray-400">Putra dari Bapak Fakhrunnadi & Ibu Siti Rohanah</p>
            <p class="text-sm mt-4 text-gray-400">Putri dari (Alm.) Ustadz Fery Idham & Ibu Cut Neneng Ashfi</p>
        </section>

        <!-- Detail Acara -->
        <section id="akad" class="card">
            <h2 class="text-gold mb-4">Akad Nikah</h2>
            <p class="text-sm text-gray-400 mb-2">07 Juli 2023 | Pukul 08.00 - 10.00 WIB</p>
            <p class="text-gold font-semibold">Lokasi Acara</p>
            <p class="text-sm text-gray-400 mb-4">Masjid Raya Aceh Sepakat <br> Perh. Tengah, Kec. Medan Petisah, Kota Medan</p>
            <button onclick="window.open('https://maps.app.goo.gl/MAP_AKAD', '_blank')">Link Google Maps</button>
        </section>

        <!-- Hitungan Mundur -->
        <section class="card">
            <h2 class="text-gold mb-4">Menghitung Hari</h2>
            <div id="countdown" style="display: flex; justify-content: center; gap: 10px; font-size: 1.5em; font-weight: 600;">
                <div class="p-3 bg-primary-dark rounded-md">
                    <span id="days">00</span><p class="text-xs font-light mt-1">Hari</p>
                </div>
                <div class="p-3 bg-primary-dark rounded-md">
                    <span id="hours">00</span><p class="text-xs font-light mt-1">Jam</p>
                </div>
                <div class="p-3 bg-primary-dark rounded-md">
                    <span id="minutes">00</span><p class="text-xs font-light mt-1">Menit</p>
                </div>
                <div class="p-3 bg-primary-dark rounded-md">
                    <span id="seconds">00</span><p class="text-xs font-light mt-1">Detik</p>
                </div>
            </div>
        </section>

        <!-- === GALERI FOTO === -->
        <section id="galeri" class="card">
            <h2 class="text-gold mb-4">Galeri Foto Kenangan</h2>
            <div class="photo-grid">
                <!-- Ganti URL placeholder dengan foto asli Anda -->
                <img src="https://placehold.co/300x300/e5b80b/1e1e1e?text=Foto+1" alt="Foto Kenangan 1">
                <img src="https://placehold.co/300x300/e5b80b/1e1e1e?text=Foto+2" alt="Foto Kenangan 2">
                <img src="https://placehold.co/300x300/e5b80b/1e1e1e?text=Foto+3" alt="Foto Kenangan 3">
                <img src="https://placehold.co/300x300/e5b80b/1e1e1e?text=Foto+4" alt="Foto Kenangan 4">
                <img src="https://placehold.co/300x300/e5b80b/1e1e1e?text=Foto+5" alt="Foto Kenangan 5">
                <img src="https://placehold.co/300x300/e5b80b/1e1e1e?text=Foto+6" alt="Foto Kenangan 6">
            </div>
        </section>
        <!-- === AKHIR GALERI FOTO === -->
        
        <!-- === AMPLOP DIGITAL === -->
        <section id="amplop-digital" class="card">
            <h2 class="text-gold mb-4">Kirim Hadiah (Amplop Digital)</h2>
            <p class="text-xs text-gray-400 mb-4">Doa restu Anda adalah karunia yang berharga, namun jika Anda ingin memberikan hadiah, kami menyediakan fasilitas amplop digital.</p>
            
            <div class="bank-detail">
                <p class="text-gold font-bold mb-2">BANK MANDIRI (Atas Nama: Ali)</p>
                <p id="rekening-ali" class="text-lg font-semibold text-light mb-2">123-456-7890</p>
                <button class="copy-btn" onclick="copyToClipboard('rekening-ali')">
                    Salin Nomor ðŸ“‹
                </button>
            </div>

            <div class="bank-detail">
                <p class="text-gold font-bold mb-2">BANK BNI (Atas Nama: Caca)</p>
                <p id="rekening-caca" class="text-lg font-semibold text-light mb-2">098-765-4321</p>
                <button class="copy-btn" onclick="copyToClipboard('rekening-caca')">
                    Salin Nomor ðŸ“‹
                </button>
            </div>
            
            <p class="text-xs text-gray-500 mt-5">Konfirmasi transfer Anda tidak diperlukan. Terima kasih.</p>
        </section>
        <!-- === AKHIR AMPLOP DIGITAL === -->

        <!-- RSVP Section -->
        <section id="rsvp-section" class="card">
            <h2 class="text-gold mb-3">Konfirmasi Kehadiran</h2>
            <p class="text-xs text-gray-400 mb-4">Mohon konfirmasi dan kirimkan ucapan Anda.</p>
            
            <form onsubmit="handleRsvp(event)" style="gap: 15px;">
              <input type="text" id="guest-name" placeholder="Nama Anda" required>
              <input type="number" id="guest-count" placeholder="Jumlah yang hadir" value="1" min="1" required>
              <textarea id="guest-message" rows="3" placeholder="Tuliskan ucapan dan doa terbaik (Opsional)"></textarea>
              <button type="submit" style="margin-top: 15px;">Kirim Ucapan & RSVP ðŸ’Œ</button>
              <p id="rsvp-status" style="margin-top: 15px; font-size: 0.9em; font-weight: 600; color: var(--text-gold);"></p>
            </form>
        </section>
        
        <!-- FITUR GEMINI API: INSPIRASI UCAPAN -->
        <section id="gemini-feature" class="card">
            <h2 class="text-gold mb-3">Inspirasi Ucapan âœ¨</h2>
            <p class="text-xs text-gray-400 mb-4">Kesulitan merangkai kata? Gunakan AI untuk mendapatkan ucapan indah.</p>

            <div style="display: flex; flex-direction: column; gap: 10px; align-items: center;">
                <select id="relationship-type" style="width: 90%; max-width: 350px; padding: 10px; border-radius: 10px; background: var(--primary-dark); color: var(--text-light);" required>
                    <option value="" disabled selected>Pilih Hubungan Anda...</option>
                    <option value="Sahabat dekat mempelai">Sahabat Dekat</option>
                    <option value="Rekan kerja mempelai">Rekan Kerja</option>
                    <option value="Keluarga dekat mempelai">Keluarga Dekat</option>
                    <option value="Guru/Dosen mempelai">Guru/Dosen</option>
                    <option value="Teman masa kuliah/sekolah">Teman Sekolah/Kuliah</option>
                </select>

                <button onclick="generateWeddingWish()" style="margin-top: 5px;">
                    Buatkan Ucapan âœ¨
                </button>
            </div>

            <div class="loader" id="wish-loader" style="margin-top: 15px;"></div>
            
            <textarea id="generated-wish-output" rows="5" placeholder="Ucapan akan muncul di sini..." readonly style="margin-top: 15px; width: 90%; max-width: 350px; height: auto; min-height: 100px; display: block;"></textarea>

            <button onclick="copyToClipboard('generated-wish-output')" class="copy-btn" style="background-color: var(--secondary-dark); margin-top: 10px;">
                Salin Ucapan
            </button>
        </section>


        <footer>
          <p class="text-xs mt-10 text-gray-500">Merupakan suatu kehormatan dan kebahagiaan bagi kami apabila Bapak/Ibu/Saudara/i, berkenan hadir dan memberikan doâ€™a restu kepada kedua mempelai.</p>
          <p class="text-gold mt-4 font-bold">Hormat Kami yang Mengundang</p>
          <p class="text-gold font-bold text-xl">Ali & Caca</p>
        </footer>
    </div>
  </div>

  <!-- Navigasi Bawah (Fixed) -->
  <div class="nav-bar">
    <div class="nav-item" onclick="scrollToSection('opener')">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
        Home
    </div>
    <div class="nav-item" onclick="scrollToSection('galeri')">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
        Galeri
    </div>
    <div class="nav-item" onclick="scrollToSection('amplop-digital')">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
        Hadiah
    </div>
    <div class="nav-item" onclick="scrollToSection('akad')">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
        Lokasi
    </div>
    <div class="nav-item" onclick="scrollToSection('rsvp-section')">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><rect x="1" y="5" width="22" height="14" rx="7"></rect><path d="M7 12h10"></path><path d="M12 7v10"></path></svg>
        RSVP
    </div>
  </div>


<script>
    const audio = document.getElementById('bg-audio');
    const audioBtn = document.getElementById('audio-btn');
    const iconOn = document.getElementById('audio-icon-on');
    const iconOff = document.getElementById('audio-icon-off');
    const opener = document.getElementById('opener');
    const invitationContent = document.getElementById('invitation-content');

    let isPlaying = false;
    const apiKey = ""; 

    // FUNGSI UNTUK SCROLL KE SECTION
    function scrollToSection(id) {
        const element = document.getElementById(id);
        if (element) {
            element.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    }

    // FUNGSI UNTUK MENGATASI AUTOPLAY BLOCKED DAN MEMBUKA UNDANGAN
    function openInvitation() {
        // 1. Tampilkan konten utama dan sembunyikan pembuka
        opener.style.display = 'none';
        invitationContent.style.display = 'block';
        
        // 2. Tampilkan tombol audio
        audioBtn.style.display = 'flex';
        
        // 3. Putar audio (memerlukan interaksi pengguna pertama)
        const playPromise = audio.play();
        if (playPromise !== undefined) {
            playPromise.then(() => {
                isPlaying = true;
                iconOn.style.display = 'block';
                iconOff.style.display = 'none';
            }).catch(error => {
                isPlaying = false;
                iconOn.style.display = 'none';
                iconOff.style.display = 'block';
                console.log("Autoplay diblokir. Klik tombol untuk memutar musik.");
            });
        }
        
        // 4. Gulir ke bagian Quotes (bagian pertama konten)
        setTimeout(() => {
            scrollToSection('quotes');
        }, 100); 
    }

    function toggleAudio() {
        if (isPlaying) {
            audio.pause();
            iconOn.style.display = 'none';
            iconOff.style.display = 'block';
        } else {
            audio.play();
            iconOn.style.display = 'block';
            iconOff.style.display = 'none';
        }
        isPlaying = !isPlaying;
    }

    // Hitungan Mundur
    const weddingDate = new Date("2023-07-07T08:00:00").getTime(); // Tanggal dari contoh
    const countdownInterval = setInterval(updateCountdown, 1000);

    function updateCountdown() {
        const now = new Date().getTime();
        const distance = weddingDate - now;

        if (distance < 0) {
            document.getElementById('countdown').innerHTML = "<span class='text-gold text-sm'>Acara telah selesai.</span>";
            clearInterval(countdownInterval);
            return;
        }

        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        document.getElementById('days').textContent = String(days).padStart(2, '0');
        document.getElementById('hours').textContent = String(hours).padStart(2, '0');
        document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
        document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');
    }
    updateCountdown(); 

    // FUNGSI RSVP
    function handleRsvp(event) {
        event.preventDefault();
        
        const name = document.getElementById('guest-name').value;
        const count = document.getElementById('guest-count').value;
        const message = document.getElementById('guest-message').value;
        const statusElement = document.getElementById('rsvp-status');

        statusElement.style.color = 'var(--text-gold)';
        statusElement.textContent = 'Mengirim konfirmasi...';

        // --- SIMULASI PENGIRIMAN DATA ---
        setTimeout(() => {
            console.log(`RSVP Diterima (Simulasi):\nNama: ${name}\nJumlah: ${count}\nUcapan: ${message}`);
            statusElement.textContent = `Terima kasih ${name}, konfirmasi kehadiran ${count} orang telah kami terima!`;
            
            setTimeout(() => {
                 document.getElementById('guest-name').value = '';
                 document.getElementById('guest-count').value = '1';
                 document.getElementById('guest-message').value = '';
            }, 3000);

        }, 1500); 
    }

    // FUNGSI BARU GEMINI API: MENGHASILKAN UCAPAN
    async function generateWeddingWish() {
        const relationship = document.getElementById('relationship-type').value;
        const output = document.getElementById('generated-wish-output');
        const loader = document.getElementById('wish-loader');
        
        if (!relationship) {
            output.value = "Silakan pilih jenis hubungan Anda terlebih dahulu.";
            return;
        }

        loader.style.display = 'block';
        output.value = '';

        const systemPrompt = `Anda adalah asisten AI yang cerdas dan hangat. Tugas Anda adalah membuat satu paragraf ucapan pernikahan yang indah dan sopan dalam bahasa Indonesia. Ucapan harus personal dan relevan dengan peran tamu yang disebutkan. Contoh format: 'Selamat menempuh hidup baru untuk Ali & Caca! [Teks Ucapan]. Semoga [Doa]'.`;
        const userQuery = `Buatkan ucapan pernikahan untuk Ali & Caca dengan peran tamu: ${relationship}.`;
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

        const payload = {
            contents: [{ parts: [{ text: userQuery }] }],
            systemInstruction: { parts: [{ text: systemPrompt }] },
        };

        // Implementasi Exponential Backoff untuk mengatasi kegagalan API
        const maxRetries = 5;
        let delay = 1000;

        for (let i = 0; i < maxRetries; i++) {
            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const result = await response.json();
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text || "Maaf, gagal menghasilkan ucapan. Coba lagi.";
                
                loader.style.display = 'none';
                output.value = text.trim();
                return;

            } catch (error) {
                console.error(`Attempt ${i + 1} failed:`, error);
                if (i === maxRetries - 1) {
                    loader.style.display = 'none';
                    output.value = "Maaf, layanan inspirasi ucapan sedang sibuk. Silakan coba kembali beberapa saat lagi.";
                    break;
                }
                await new Promise(resolve => setTimeout(resolve, delay));
                delay *= 2; // Gandakan delay
            }
        }
    }

    // FUNGSI SALIN KE CLIPBOARD
    function copyToClipboard(elementId) {
        // Menggunakan teknik lama (execCommand) untuk kompatibilitas yang lebih baik di iFrame
        const element = document.getElementById(elementId);
        
        // Buat elemen textarea sementara untuk memegang teks yang akan disalin
        const tempTextarea = document.createElement('textarea');
        tempTextarea.value = element.textContent || element.value; // Ambil teks dari elemen
        document.body.appendChild(tempTextarea);

        // Pilih teks dan salin
        tempTextarea.select();
        tempTextarea.setSelectionRange(0, 99999); // Untuk perangkat mobile
        
        try {
            document.execCommand('copy');
            alertMessage('Nomor berhasil disalin!', 'var(--text-gold)');
        } catch (err) {
            alertMessage('Gagal menyalin. Silakan salin secara manual.', 'var(--primary-dark)');
        }
        
        // Hapus elemen sementara
        document.body.removeChild(tempTextarea);
    }

    // FUNGSI PENGGANTI ALERT (Pesan status di bawah formulir)
    function alertMessage(message, color) {
        // Menggunakan rsvp-status untuk pesan notifikasi
        const statusElement = document.getElementById('rsvp-status');
        statusElement.style.color = color;
        statusElement.textContent = message;
        
        // Hapus pesan setelah 3 detik
        setTimeout(() => {
             statusElement.textContent = '';
        }, 3000);
    }

</script>
</body>
</html>

