<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Yusuf & Uchy Wedding Invitation</title>
  <!-- Load Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Load Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLMD/CD8B/N6w7xO8F/0rZ04k7W70D/uP6uTf5sF8H/Bw4g6v5i6h0E+e8g6N0E+g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!-- Load Playfair Display & Poppins Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
  
  <script>
    // Konfigurasi Tailwind untuk warna dan font kustom
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            cream: '#f9f6f1',
            green: '#486b54',
            gold: '#bfa06f',
            graytext: '#888',
            navbg: 'rgba(255, 255, 255, 0.95)', // Background navbar semi-transparan
          },
          fontFamily: {
            // Font untuk nama utama, judul
            display: ['"Playfair Display"', 'serif'],
            // Font utama untuk teks
            sans: ['Poppins', 'sans-serif'],
          },
        }
      }
    }
  </script>

  <style>
    /* Styling umum */
    body {
      font-family: "Poppins", sans-serif;
      color: theme('colors.green');
      background: theme('colors.cream');
      overflow-x: hidden;
      scroll-behavior: smooth;
      /* Tambahkan padding bawah agar konten tidak tertutup navbar */
      padding-bottom: 70px;
    }
    
    /* Memastikan body tidak bisa di-scroll sebelum dibuka */
    body.no-scroll {
      overflow-y: hidden;
    }

    /* Style untuk border floral di cover page */
    .floral-bg {
      background-image: url('https://png.pngtree.com/png-vector/20230906/ourmid/pngtree-eucalyptus-green-leaves-floral-corner-frame-png-image_10165193.png');
      background-repeat: no-repeat;
      background-size: 250px;
      opacity: 0.3;
      pointer-events: none; /* agar tidak mengganggu interaksi */
    }

    /* Posisi Awal Fade-In */
    #content {
      opacity: 0;
      transition: opacity 1.5s ease-in-out;
    }
    #content.visible {
      opacity: 1;
    }

    /* Smooth transition for overlay */
    #overlay {
      transition: opacity 0.6s ease;
    }
  </style>
</head>

<body class="no-scroll">
  <!-- Overlay Password - Sama seperti referensi (layar kiri) sebelum dibuka -->
  <div id="overlay" class="fixed inset-0 flex flex-col items-center justify-center text-center bg-cream z-[9999] p-6">
    <div class="max-w-xs w-full p-8 bg-white/70 backdrop-blur-sm rounded-xl shadow-lg border border-green/10">
      <h2 class="font-display text-2xl font-semibold text-green mb-4">Wedding Invitation üíå</h2>
      <p class="text-sm text-graytext mb-4">Mohon masukkan kode undangan untuk melanjutkan.</p>
      
      <input type="password" id="password" placeholder="Kode Rahasia" 
             class="p-3 w-full text-center rounded-lg border border-green/50 outline-none text-green focus:border-gold transition duration-300 bg-white" 
             autocomplete="off"/>
      
      <button onclick="checkPass()"
              class="mt-4 w-full bg-gold text-white font-semibold py-3 rounded-lg hover:bg-green shadow-md transition duration-300 active:scale-[0.98]">
        Buka Undangan
      </button>
      <p id="error" class="text-red-500 text-sm mt-3"></p>
    </div>
  </div>

  <!-- Isi Undangan (Container Utama) -->
  <div id="content" class="min-h-screen">
    <!-- Section 1: Cover Page (Meniru Layar Kiri di Referensi) -->
    <section id="cover" class="relative min-h-screen flex items-center justify-center overflow-hidden">
      <!-- Dekorasi Floral -->
      <div class="floral-bg absolute inset-0">
        <!-- Posisi Top Left -->
        <div class="absolute top-0 left-0 w-[250px] h-[250px] transform -translate-x-12 -translate-y-12 rotate-0"></div>
        <!-- Posisi Bottom Right -->
        <div class="absolute bottom-0 right-0 w-[250px] h-[250px] transform translate-x-12 translate-y-12 rotate-180"></div>
      </div>

      <div class="relative z-10 w-full max-w-md mx-auto p-8 text-center bg-white/50 backdrop-blur-[2px] rounded-lg">
        <p class="text-sm font-light text-green/80 tracking-widest">The Wedding Of</p>
        <h1 class="font-display text-5xl sm:text-7xl font-bold text-green my-2">
          Yusuf
          <span class="text-gold text-4xl sm:text-6xl mx-2">&</span>
          Uchy
        </h1>
        <p class="text-gold font-semibold text-lg sm:text-xl mt-4 mb-8">07 ‚Ä¢ JULI ‚Ä¢ 2025</p>

        <!-- Informasi Tamu -->
        <div class="p-4 bg-cream/70 rounded-xl shadow-inner mb-8 border border-green/10">
          <p class="text-xs font-medium text-graytext mb-2 tracking-wider">Kepada Yth.</p>
          <p class="text-lg font-semibold text-green mb-1">Bapak/Ibu/Saudara/i</p>
          <!-- Placeholder Nama Tamu -->
          <p class="text-2xl font-display font-bold text-green" id="recipientName">
            Nama Tamu
          </p>
        </div>
        
        <!-- Tombol untuk membuka (akan disembunyikan setelah dibuka) -->
        <button id="openButton"
                class="bg-gold text-white font-semibold py-3 px-10 rounded-full hover:bg-green shadow-xl transition duration-300 active:scale-[0.98] mt-4"
                onclick="scrollToSection('contentDetail')">
          Open Invitation
        </button>
      </div>
    </section>

    <!-- Section 2: Detail Undangan (Contoh dari Layar Kanan di Referensi) -->
    <section id="contentDetail" class="min-h-screen bg-cream flex flex-col items-center p-8">
      <div class="w-full max-w-md mx-auto text-center">
        <!-- Header detail pernikahan -->
        <p class="text-sm font-medium text-green mb-4">
          Dengan memohon rahmat dan ridho Allah SWT, kami mengundang Anda untuk hadir pada acara resepsi pernikahan putra-putri kami.
        </p>
        
        <div class="my-8">
            <h2 class="font-display text-3xl font-bold text-green mb-2">Akad Nikah</h2>
            <p class="text-lg font-semibold text-gold mb-4">Minggu, 07 Juli 2025</p>
            <p class="text-sm text-graytext">08.00 WIB - 10.00 WIB</p>
        </div>

        <div id="location" class="p-6 bg-white rounded-xl shadow-lg border-t-4 border-gold">
            <h3 class="text-xl font-display font-bold text-green mb-2">Calamus Ballroom</h3>
            <p class="text-md font-medium text-graytext">Jl. Mawar No.7, Cihampelas, Bandung</p>
            <a href="https://maps.google.com/?q=Calamus+Ballroom" target="_blank"
               class="inline-block mt-4 text-green font-semibold hover:text-gold transition duration-200 text-sm">
                Lihat Lokasi di Peta
            </a>
        </div>
        
        <!-- Tombol Link Hadiah -->
        <a id="gift" href="https://linktransfermu.com" target="_blank"
           class="btn inline-block mt-10 bg-green text-white font-semibold py-3 px-8 rounded-full shadow-lg hover:bg-gold transition duration-300 active:scale-[0.98]">
          Kirim Hadiah Digital üíù
        </a>

        <!-- Footer / Closing -->
        <p class="text-sm text-graytext mt-12 mb-4">Merupakan suatu kehormatan dan kebahagiaan bagi kami, apabila Bapak/Ibu/Saudara/i, berkenan hadir dan memberikan do'a restu kepada kedua mempelai.</p>
        <p class="font-display text-xl font-semibold text-green">Wassalamu'alaikum Wr. Wb.</p>
      </div>
    </section>
  </div>
  
  <!-- Fixed Bottom Navigation Bar -->
  <nav id="bottomNav" class="fixed bottom-0 left-0 right-0 z-40 bg-navbg shadow-2xl backdrop-blur-sm border-t border-green/10">
    <div class="max-w-xl mx-auto flex justify-around items-center h-16">
      
      <!-- Icon 1: Home/Cover -->
      <a href="#cover" onclick="scrollToSection('cover')" class="flex flex-col items-center text-green hover:text-gold transition duration-200 text-sm">
        <i class="fas fa-home text-xl mb-1"></i>
        <span>Home</span>
      </a>

      <!-- Icon 2: Detail/Acara -->
      <a href="#contentDetail" onclick="scrollToSection('contentDetail')" class="flex flex-col items-center text-green hover:text-gold transition duration-200 text-sm">
        <i class="fas fa-calendar-alt text-xl mb-1"></i>
        <span>Acara</span>
      </a>

      <!-- Icon 3: Lokasi/Peta -->
      <a href="#location" onclick="scrollToSection('location')" class="flex flex-col items-center text-green hover:text-gold transition duration-200 text-sm">
        <i class="fas fa-map-marked-alt text-xl mb-1"></i>
        <span>Lokasi</span>
      </a>

      <!-- Icon 4: Hadiah -->
      <a href="#gift" onclick="scrollToSection('gift')" class="flex flex-col items-center text-green hover:text-gold transition duration-200 text-sm">
        <i class="fas fa-gift text-xl mb-1"></i>
        <span>Hadiah</span>
      </a>
    </div>
  </nav>

  <!-- Script cek password dan interaksi -->
  <script>
    const overlay = document.getElementById("overlay");
    const content = document.getElementById("content");
    const error = document.getElementById("error");
    const body = document.body;
    
    // Hapus CORRECT_PASS karena kita akan menggunakan API
    // const CORRECT_PASS = "yusufuchy"; 

    // Fungsi untuk scroll ke section dengan smooth
    function scrollToSection(sectionId) {
        document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
    }

    // Ambil nama tamu dari URL jika ada
    document.addEventListener('DOMContentLoaded', () => {
      const urlParams = new URLSearchParams(window.location.search);
      let recipient = urlParams.get('to') || urlParams.get('kepada');
      
      if (recipient) {
        // Bersihkan dan format nama
        recipient = decodeURIComponent(recipient.replace(/\+/g, ' ')).trim();
        document.getElementById('recipientName').innerText = recipient;
      }
    });

    // Fungsi cek password, menggunakan Vercel API
    async function checkPass() {
      const input = document.getElementById("password").value.trim(); // Jangan di-toLowerCase() karena password Vercel bersifat case-sensitive
      
      // Mengunci tombol saat fetch
      const button = document.querySelector('#overlay button');
      button.disabled = true;
      button.innerText = 'Mengecek...';
      error.innerText = ''; // Hapus pesan error lama

      try {
        // Ganti dengan endpoint API Vercel Anda
        const API_ENDPOINT = '/api/check-pass'; 
        
        // Melakukan fetch ke API Vercel
        const res = await fetch(`${API_ENDPOINT}?pass=${encodeURIComponent(input)}`);
        
        if (!res.ok) {
            throw new Error(`Server error: ${res.status}`);
        }

        const data = await res.json();
        
        if (data.valid) {
          // Sukses
          overlay.classList.add("opacity-0");
          
          setTimeout(() => {
            overlay.style.display = "none";
            content.classList.add("visible");
            body.classList.remove("no-scroll");
            
            // Panggil scrollToSection setelah konten terlihat
            scrollToSection('cover');
          }, 600); 
          
        } else {
          // Gagal
          error.innerText = "Kode salah, coba lagi üåø";
        }
      } catch (e) {
        console.error("Gagal terhubung ke API:", e);
        error.innerText = "Gagal terhubung ke server. Pastikan API Vercel aktif.";
      } finally {
        // Aktifkan kembali tombol
        button.disabled = false;
        button.innerText = 'Buka Undangan';
      }
    }
    
    // Pastikan navigasi berfungsi setelah dibuka, tambahkan id pada section dan link.
    // Tambahkan event listener untuk smooth scrolling pada anchor links jika diperlukan
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const targetId = this.getAttribute('href').substring(1);
            if (targetId) {
                scrollToSection(targetId);
            }
        });
    });

  </script>
</body>
</html>
